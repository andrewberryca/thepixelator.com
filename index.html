<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Pixelator</title>
  <link rel="stylesheet" href="resources/css/styles.css" />
</head>
<body>

  <header>
    <canvas id="logo" width="100" height="100" aria-hidden="true"></canvas>
    <div class="header-text">
      <h1>The Pixelator</h1>
      <p class="tagline">
        An experiment to provide interaction to David DeSandro's excellent
        <a href="https://github.com/desandro/close-pixelate" target="_blank" rel="noopener">Close-Pixelate</a> library.
      </p>
    </div>
    <nav class="header-nav" aria-label="Actions">
      <ul>
        <li><button type="button" id="link-to-image" class="nav-btn link-btn">Link to this Image</button></li>
        <li><button type="button" id="generate-js"   class="nav-btn js-btn">Generate JS</button></li>
        <li><button type="button" id="save-image"     class="nav-btn save-btn">Save Image</button></li>
      </ul>
    </nav>
  </header>

  <main>
    <!-- ── Left column: style presets + layer controls ────────────────────── -->
    <div id="col1">
      <div id="preset-styles">
        <span>Example Styles</span>
        <ul id="preset-style-list" aria-label="Preset styles">
          <li>1</li><li>2</li><li>3</li><li>4</li>
          <li>5</li><li>6</li><li>7</li><li>8</li>
        </ul>
      </div>

      <div id="settings">
        <div id="setting-groups"></div>
        <div class="add-layer-row">
          <a href="#" id="add-layer-link">Add Layer &raquo;</a>
        </div>
      </div>
    </div>

    <!-- ── Right column: image source + canvas ──────────────────────────── -->
    <div id="col2">
      <ul id="view-mode" role="tablist" aria-label="View mode">
        <li role="tab" data-mode="original">Original Image</li>
        <li role="tab" data-mode="pixelate" aria-selected="true">Pixelated Image</li>
        <li role="tab" data-mode="animate">Start Animation</li>
      </ul>

      <!-- Examples -->
      <div class="image-source-row">
        <label class="radio-label">
          <input type="radio" name="ir" id="ir1" value="examples" checked />
          Examples
        </label>
        <div class="image-source-field">
          <select id="preset-images">
            <optgroup label="Wildlife">
              <option value="brown_pelican.jpg" selected>Brown Pelican</option>
              <option value="great_blue_heron.jpg">Great Blue Heron</option>
              <option value="coati.jpg">White-nosed Coati</option>
              <option value="hummingbird.jpg">Hummingbird</option>
              <option value="hedgehog.jpg">Hedgehog</option>
              <option value="grackle.jpg">Grackle</option>
              <option value="duckling.jpg">Duckling</option>
            </optgroup>
            <optgroup label="Misc">
              <option value="opensource_logo.gif">Open Source Logo</option>
              <option value="earth.jpg">The Earth</option>
              <option value="moon.jpg">The Moon</option>
              <option value="beach.jpg">Beach</option>
              <option value="checkers.gif">Checkerboard</option>
              <option value="ferris_wheel.gif">Ferris Wheel</option>
              <option value="flag.gif">Flag</option>
              <option value="mountain.gif">Mountain</option>
            </optgroup>
          </select>
        </div>
      </div>

      <!-- Image URL -->
      <div class="image-source-row">
        <label class="radio-label">
          <input type="radio" name="ir" id="ir2" value="image_url" />
          Image URL
        </label>
        <div class="image-source-field url-row">
          <input type="url" id="image-url" placeholder="https://example.com/image.jpg" />
          <button type="button" id="load-remote-btn">Load</button>
        </div>
      </div>

      <!-- File upload -->
      <div class="image-source-row">
        <label class="radio-label">
          <input type="radio" name="ir" id="ir3" value="upload" />
          Upload
        </label>
        <div class="image-source-field">
          <input type="file" id="file-upload" accept="image/*" />
        </div>
      </div>

      <div class="spacer"></div>
      <div id="image-container"></div>
    </div>
  </main>

  <footer>
    <a href="https://github.com/andrewberryca/thepixelator.com" class="fork-link" target="_blank" rel="noopener">
      <img src="resources/images/fork.gif" alt="Fork on GitHub" />
    </a>
    <nav aria-label="Scripts">
      <h2>Scripts used on this site</h2>
      <ul>
        <li><a href="https://github.com/desandro/close-pixelate" target="_blank" rel="noopener">Close-Pixelate</a></li>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API" target="_blank" rel="noopener">Canvas API</a></li>
      </ul>
    </nav>
    <nav aria-label="Links">
      <h2>Other links</h2>
      <ul>
        <li><a href="#" id="about-link">About this site</a></li>
        <li><a href="https://developer.mozilla.org/en/canvas_tutorial" target="_blank" rel="noopener">Canvas tutorial</a></li>
        <li><a href="https://diveintohtml5.info/canvas.html" target="_blank" rel="noopener">Dive into HTML5: Canvas</a></li>
      </ul>
    </nav>
  </footer>

  <!-- ══════════════════════════════════════════════════════════════════════
       Dialogs — native <dialog>, no jQuery UI
       ══════════════════════════════════════════════════════════════════════ -->

  <dialog id="dialog-no-canvas" aria-labelledby="dlg-nc-title">
    <h2 id="dlg-nc-title">Browser Not Supported</h2>
    <p>Sorry — your browser doesn't support HTML5 Canvas. Please try a modern browser.</p>
    <div class="dialog-actions">
      <button type="button" class="dialog-close btn-primary">Close</button>
    </div>
  </dialog>

  <dialog id="dialog-link" aria-labelledby="dlg-link-title">
    <h2 id="dlg-link-title">Your Image URL</h2>
    <p>Copy this URL to share your current pixelation settings.</p>
    <input type="text" id="share-url" readonly />
    <div class="dialog-actions">
      <button type="button" id="copy-url-btn" class="btn-primary">Copy to Clipboard</button>
      <button type="button" class="dialog-close">Close</button>
    </div>
  </dialog>

  <dialog id="dialog-generate-js" aria-labelledby="dlg-js-title">
    <h2 id="dlg-js-title">Close-Pixelate JS</h2>
    <p>
      Paste this into your own page with the
      <a href="https://github.com/desandro/close-pixelate" target="_blank" rel="noopener">Close-Pixelate</a>
      library to recreate your current design.
    </p>
    <textarea id="js-output" readonly></textarea>
    <div class="dialog-actions">
      <button type="button" class="dialog-close btn-primary">Close</button>
    </div>
  </dialog>

  <dialog id="dialog-error" aria-labelledby="dlg-err-title">
    <h2 id="dlg-err-title">Oops!</h2>
    <p id="error-message"></p>
    <div class="dialog-actions">
      <button type="button" class="dialog-close btn-primary">Close</button>
    </div>
  </dialog>

  <dialog id="dialog-about" aria-labelledby="dlg-about-title">
    <h2 id="dlg-about-title">About this site</h2>
    <p>
      <em>The Pixelator</em> is really nothing more than an excuse to play around with Canvas,
      an HTML5 technology for creating images on the fly with JavaScript. A co-worker sent me a link
      to DeSandro's amazing
      <a href="https://github.com/desandro/close-pixelate" target="_blank" rel="noopener">Close-Pixelate</a>
      script — so all I really did was slap on a UI.
    </p>
    <p>&#8212; <a href="https://www.benjaminkeen.com" target="_blank" rel="noopener">Ben</a></p>
    <canvas id="about-canvas" width="620" height="270"></canvas>
    <button type="button" id="toggle-about-source" class="toggle-btn">View Swirly Source</button>
    <textarea id="swirly-source" class="hidden" readonly></textarea>
    <div class="dialog-actions">
      <button type="button" class="dialog-close btn-primary">Close</button>
    </div>
  </dialog>

  <!-- ══════════════════════════════════════════════════════════════════════
       Layer template — cloned by pixelator.js for each new pixel layer
       ══════════════════════════════════════════════════════════════════════ -->
  <template id="layer-template">
    <div class="setting-group">
      <div class="layer-header" draggable="true" title="Drag to reorder">
        <div class="layer-num">
          <input type="checkbox" class="enabled" checked />
          <label class="enabled-label">Enable Layer</label>
        </div>
        <button type="button" class="delete-setting" aria-label="Remove layer">&times;</button>
      </div>
      <div class="layer-controls">
        <div class="control-row">
          <label>Shape</label>
          <select class="shape">
            <option value="circle">Circle</option>
            <option value="square">Square</option>
            <option value="diamond">Diamond</option>
          </select>
        </div>
        <div class="control-row">
          <label>Spacing</label>
          <input type="range" class="resolution animatable" min="8" max="200" step="2" value="32" />
          <span class="range-val">32</span>
        </div>
        <div class="control-row">
          <label>Offset</label>
          <input type="range" class="offset animatable" min="0" max="100" step="1" value="0" />
          <span class="range-val">0</span>
        </div>
        <div class="control-row">
          <label>Size</label>
          <input type="range" class="size animatable" min="2" max="200" step="1" value="30" />
          <span class="range-val">30</span>
        </div>
        <div class="control-row">
          <label>Alpha</label>
          <input type="range" class="alpha" min="0.001" max="1" step="0.01" value="0.5" />
          <span class="range-val">0.5</span>
        </div>
      </div>
    </div>
  </template>

  <script src="resources/scripts/close-pixelate.js"></script>
  <script src="resources/scripts/pixelator.js"></script>
</body>
</html>
